!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("babylonjs")):"function"==typeof define&&define.amd?define("babylonjs-serializers",["babylonjs"],t):"object"==typeof exports?exports["babylonjs-serializers"]=t(require("babylonjs")):e.SERIALIZERS=t(e.BABYLON)}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this,(e=>(()=>{"use strict";var t={597:t=>{t.exports=e}},r={};function o(e){var i=r[e];if(void 0!==i)return i.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,o),n.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{o.d(i,{default:()=>u});var e={};o.r(e),o.d(e,{OBJExport:()=>n});var t={};o.r(t),o.d(t,{OBJExport:()=>n});var r=o(597),n=function(){function e(){}return e.OBJ=function(e,t,o,i){var n=[],a=1,s=1;t&&(o||(o="mat"),n.push("mtllib "+o+".mtl"));for(var u=0;u<e.length;u++){var l=e[u].name||"mesh".concat(u,"}");n.push("o ".concat(l));var p=null;if(i){var f=e[u].computeWorldMatrix(!0);p=new r.Matrix,f.invertToRef(p),e[u].bakeTransformIntoVertices(f)}if(t){var d=e[u].material;d&&n.push("usemtl "+d.id)}var m=e[u].geometry;if(m){var c=m.getVerticesData("position"),h=m.getVerticesData("normal"),b=m.getVerticesData("uv"),x=m.getIndices(),v=0,g=0;if(c&&x){for(var y=e[0].getScene().useRightHandedSystem,T=y?1:-1,j=0;j<c.length;j+=3)n.push("v "+c[j]*T+" "+c[j+1]+" "+c[j+2]),v++;if(null!=h)for(j=0;j<h.length;j+=3)n.push("vn "+h[j]*T+" "+h[j+1]+" "+h[j+2]);if(null!=b)for(j=0;j<b.length;j+=2)n.push("vt "+b[j]+" "+b[j+1]),g++;var F=["","",""],S=y?[2,1]:[1,2],w=S[0],C=S[1];for(j=0;j<x.length;j+=3){var O=[String(x[j]+a),String(x[j+w]+a),String(x[j+C]+a)],B=[String(x[j]+s),String(x[j+w]+s),String(x[j+C]+s)],K=O,_=null!=b?B:F,I=null!=h?O:F;n.push("f "+K[0]+"/"+_[0]+"/"+I[0]+" "+K[1]+"/"+_[1]+"/"+I[1]+" "+K[2]+"/"+_[2]+"/"+I[2])}i&&p&&e[u].bakeTransformIntoVertices(p),a+=v,s+=g}else r.Tools.Warn("There are no position vertices or indices on the mesh!")}else r.Tools.Warn("No geometry is present on the mesh")}return n.join("\n")},e.MTL=function(e){var t=[],r=e.material;return t.push("newmtl mat1"),t.push("  Ns "+r.specularPower.toFixed(4)),t.push("  Ni 1.5000"),t.push("  d "+r.alpha.toFixed(4)),t.push("  Tr 0.0000"),t.push("  Tf 1.0000 1.0000 1.0000"),t.push("  illum 2"),t.push("  Ka "+r.ambientColor.r.toFixed(4)+" "+r.ambientColor.g.toFixed(4)+" "+r.ambientColor.b.toFixed(4)),t.push("  Kd "+r.diffuseColor.r.toFixed(4)+" "+r.diffuseColor.g.toFixed(4)+" "+r.diffuseColor.b.toFixed(4)),t.push("  Ks "+r.specularColor.r.toFixed(4)+" "+r.specularColor.g.toFixed(4)+" "+r.specularColor.b.toFixed(4)),t.push("  Ke "+r.emissiveColor.r.toFixed(4)+" "+r.emissiveColor.g.toFixed(4)+" "+r.emissiveColor.b.toFixed(4)),r.ambientTexture&&t.push("  map_Ka "+r.ambientTexture.name),r.diffuseTexture&&t.push("  map_Kd "+r.diffuseTexture.name),r.specularTexture&&t.push("  map_Ks "+r.specularTexture.name),r.bumpTexture&&t.push("  map_bump -imfchan z "+r.bumpTexture.name),r.opacityTexture&&t.push("  map_d "+r.opacityTexture.name),t.join("\n")},e}(),a=void 0!==o.g?o.g:"undefined"!=typeof window?window:void 0;if(void 0!==a)for(var s in e)a.BABYLON[s]=e[s];const u=t})(),i.default})()));
//# sourceMappingURL=babylon.objSerializer.min.js.map